<div layout="column" class="relative" flex role="main" id="elecciones">
    <!-- HEADER -->
    <script type="text/ng-template" id="perfil-popover">
        <div class="triangle"></div>
            <div class="ns-popover-tooltip">
            <div class="enlaces-popover">
                <ul>
                    <li>
                        <md-button ng-click="openPerfil($event, 'perfil');" class="md-primary">
                            <ng-md-icon icon="account_circle"></ng-md-icon>
                            Configurar
                        </md-button>
                    </li>
                </ul>
            </div>
        </div>
    </script>
    <script type="text/ng-template" id="modulos-cabecera">
        <div class="triangle"></div>
            <div class="ns-popover-tooltip">
            <div class="enlaces-popover enlaces-apps">
                <ul>
                  <li has-permission slug-module="socialtv" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/oido-social');" class="md-icon-button" aria-label="Button">
                          <ng-md-icon icon="facebook-messenger" size="48" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Oido social</h5>
                      <md-tooltip>Odido Social</md-tooltip>
                  </li>
                  <li has-permission slug-module="noticias" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/publicador');" class="md-icon-button" aria-label="Button">
                          <ng-md-icon icon="my_library_books" size="48" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Publicador</h5>
                      <md-tooltip>Publicador</md-tooltip>
                  </li>
                  <li has-permission slug-module="ticker" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/ticker');" class="md-icon-button" aria-label="Button">
                          <ng-md-icon icon="tv" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Ticker</h5>
                      <md-tooltip>Ticker</md-tooltip>
                  </li>
                  <li has-permission slug-module="player" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/streaming');" class="md-icon-button" aria-label="Button">
                          <ng-md-icon icon="settings_input_antenna" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Streaming</h5>
                      <md-tooltip>Streaming</md-tooltip>
                  </li>
                  <li has-permission slug-module="eventos" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/eventos');" class="md-icon-button">
                          <ng-md-icon icon="alarm" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Eventos</h5>
                      <md-tooltip>Eventos</md-tooltip>
                  </li>
                  <li has-permission slug-module="podcast" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/podcast');" class="md-icon-button">
                          <ng-md-icon icon="volume_up" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Podcast</h5>
                      <md-tooltip>Podcast</md-tooltip>
                  </li>
                  <li has-permission slug-module="sondeos" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/elecciones');" class="md-icon-button">
                          <ng-md-icon icon="poll" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Elecciones</h5>
                      <md-tooltip>Elecciones</md-tooltip>
                  </li>
                  <li has-permission slug-module="redessociales" action-module="index" style="display: inline-block;">
                      <md-button aria-label="Redes Sociales" ng-click="openApps($event, '/redessociales/publicadas');" class="md-icon-button">
                          <ng-md-icon icon="group_add" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Redes sociales</h5>
                      <md-tooltip>Configurar Redes Sociales</md-tooltip>
                  </li>
                  <li has-permission slug-module="roles" action-module="index" style="display: inline-block;">
                      <md-button ng-click="openApps($event, '/roles');" class="md-icon-button">
                          <ng-md-icon icon="recent_actors" size="44" style="fill:rgb(4, 119, 210)"></ng-md-icon>
                      </md-button>
                      <h5>Roles</h5>
                      <md-tooltip>Roles</md-tooltip>
                  </li>
                </ul>
            </div>
        </div>
    </script>
    <md-toolbar ng-class="{'novisibletoolbar':!custom}" class="md-toolbar-head">
        <div class="md-toolbar-tools">
            <figure class="logo"><img ng-click="openBase()" class="pointer" src="svg/logo-grupo-rpp.svg" alt="Logo Grupo RPP"></figure>
            <!-- <md-button ng-class="{'novisiblesearch':!custom}" ng-click="toggleSidebarLeft()" class="md-icon-button" aria-label="Settings">
              <ng-md-icon icon="more_vert" style="fill: white"></ng-md-icon>
            </md-button> -->
            <!-- <div class="contentSearch" id="contentSearch">
                <ng-md-icon icon="search" style="fill: white"></ng-md-icon>
                <md-autocomplete
                    class="filterText"
                    md-selected-item="selectedFilterText"
                    md-search-text="filterText"
                    md-search-text-change="changeItemsSearch"
                    md-items="item in getItemsSearch($event, filterText)"
                    md-item-text="item"
                    md-delay="250"
                    placeholder="Últimos eventos"
                    ng-disabled="disabledSearch"
                    ng-keypress="buscarEnter($event, suceso)"
                >
                    <span md-highlight-text="filterText">{{item}}</span>
                </md-autocomplete>
                <ng-md-icon ng-click="btnOpenFilter($event)" class="iconFilter" icon="filter_list" style="fill: white"></ng-md-icon>
                <div ng-show="formOptionSearch" layout-padding id="optionSearch" class="md-whiteframe-z4">
                      <div layout layout-sm="column" class="block-filter--inner">
                          <select
                            flex
                            chosen
                            ng-model="filterCategoria"
                            ng-options="item.descripcion for item in enumCategoria track by item.id"
                            data-placeholder="Categoría"
                            no-results-text="'No hay opciones'"
                            >
                              <option value=""></option>
                          </select>
                          <select
                            flex
                            chosen
                            ng-change="changeLoadSectionHeader($event)"
                            ng-model="$parent.filterCampeonato"
                            ng-options="item.nombre for item in listaCampeonatos track by item.id"
                            data-placeholder="Campeonato"
                            no-results-text="'No hay opciones'"
                            ng-if="filterCategoria.id==1"
                            >
                              <option value=""></option>
                          </select>

                          <select
                            flex
                            chosen
                            ng-model="$parent.filterEquipo"
                            ng-options="item.nombre for item in filterTypeContents track by item.slug"
                            data-placeholder="Equipo"
                            no-results-text="'No hay opciones'"
                            ng-if="filterCategoria.id==1"
                            >
                              <option value=""></option>
                          </select>
                      </div>
                      <div layout layout-sm="column" class="block-filter--inner">
                          <select
                            flex
                            chosen
                            ng-model="filterEstado"
                            ng-options="item.slug for item in enumEstado track by item.slug"
                            data-placeholder="Estado"
                            no-results-text="'No hay opciones'"
                            >
                              <option value=""></option>
                          </select>
                      </div>
                      <div layout layout-sm="column" class="block-filter--inner">
                          <div flex style="margin-right: 5px;">
                              <div class="label">Desde</div>
                              <input type="date" ng-model="filterFrom">
                          </div>
                          <div flex style="margin-right: 5px;">
                              <div class="label">Hasta</div>
                              <input type="date" ng-model="filterTo">
                          </div>
                      </div>
                      <div layout layout-sm="column" class="block-filter--actions">
                          <md-button ng-click="searchFilterNews($event)" type="button" class="md-raised md-warn">Buscar</md-button>
                      </div>
                </div>
            </div> -->
            <div flex="1"></div>
            <div class="drop-panel" ng-class="{'novisiblesearch':!custom}" >
                <!--md-button ng-click="openPanel($event)" class="md-icon-button" aria-label="Dashboard"-->
                <md-button
                    ng-class="{'novisiblesearch':!custom}"
                    class="md-icon-button"
                    aria-label="Modulos"
                    ns-popover
                    ns-popover-template="modulos-cabecera"
                    ns-popover-trigger="click"
                    ns-popover-placement="bottom"
                    ns-popover-theme="ns-popover-tooltip-theme"
                    ns-popover-timeout="0.5"
                 >
                    <ng-md-icon icon="apps" style="fill: white"></ng-md-icon>
                      <md-tooltip md-direction="bottom">
                          Dashboard
                      </md-tooltip>
                </md-button>
                <div class="drop-panel-child" ng-show="showPanel">
                    <ul class="list-modules">
                        <li>
                            <md-button class="md-icon-button" aria-label="Usuarios">
                                <ng-md-icon icon="people"></ng-md-icon>
                            </md-button>
                            <span>Usuarios</span>
                        </li>
                        <li>
                            <md-button class="md-icon-button" aria-label="Configuración">
                                <ng-md-icon icon="settings"></ng-md-icon>
                            </md-button>
                            <span>Configuración</span>
                        </li>
                        <li>
                            <md-button class="md-icon-button" aria-label="Rotafono">
                                <ng-md-icon icon="perm_phone_msg"></ng-md-icon>
                            </md-button>
                            <span>Rotafono</span>
                        </li>
                        <li>
                            <md-button class="md-icon-button" aria-label="Estadisticas">
                                <ng-md-icon icon="poll"></ng-md-icon>
                            </md-button>
                            <span>Estadisticas</span>
                        </li>
                        <li>
                            <md-button class="md-icon-button" aria-label="Radio">
                                <ng-md-icon icon="radio"></ng-md-icon>
                            </md-button>
                            <span>Radio</span>
                        </li>
                        <li>
                            <md-button class="md-icon-button" aria-label="Agencias">
                                <ng-md-icon icon="public"></ng-md-icon>
                            </md-button>
                            <span>Agencias</span>
                        </li>
                    </ul>
                </div>
            </div>
            <md-button ng-class="{'novisiblesearch':!custom}"  class="md-icon-button" aria-label="Chat">
              <ng-md-icon icon="chat" style="fill: white"></ng-md-icon>
              <md-tooltip md-direction="bottom">
                  Chat
              </md-tooltip>
            </md-button>
            <div class="drop-panel" ng-class="{'novisiblesearch':!custom}" >
                <!--md-button ng-click="openPanel2($event)" class="md-icon-button " aria-label="Modules"-->
                <md-button class="md-icon-button " aria-label="Modules">
                  <ng-md-icon icon="archive" style="fill: white"></ng-md-icon>
                  <md-tooltip md-direction="bottom">
                      Módulos
                  </md-tooltip>
                </md-button>
            </div>
            <md-button
                ng-class="{'novisiblesearch':!custom}"
                class="md-icon-button"
                aria-label="User"
                ns-popover
                ns-popover-template="perfil-popover"
                ns-popover-trigger="click"
                ns-popover-placement="bottom"
                ns-popover-theme="ns-popover-tooltip-theme"
                ns-popover-timeout="0.5"
                >

                <img ng-if="user.pictureUrl" ng-src="{{ user.pictureUrl }}" alt="User" style="width:24px;height:24px;border-radius:50%;"></img>
                <md-icon ng-if="!user.pictureUrl" md-svg-src="svg/user.svg" alt="User" style="width:24px;height:24px,"></md-icon>

                <md-tooltip md-direction="bottom">
                    Usuario
                </md-tooltip>
            </md-button>
            <md-button ng-class="{'novisiblesearch':!custom}" ng-disabled="disabledCloseSession" ng-click="closeSession()" class="md-icon-button" aria-label="Scape">
                <md-tooltip md-direction="bottom">
                    Salir del sistema
                </md-tooltip>
              <ng-md-icon icon="settings_power" style="fill: white"></ng-md-icon>
            </md-button>
        </div>
    </md-toolbar>
    <div flex>
        <div ng-click="hideLayer($event)" id="layerSearch" ng-show="layerSearch"></div>
        <div layout="column">
            <!-- BREADCRUMB -->
            <md-toolbar class="md-toolbar-subhead">
                <div layout="row" layout-align="center center" class="md-toolbar-tools md-toolbar-breadcrumb md-whiteframe-z1">
                    <md-button type="button" class="md-icon-button" ng-click="clicVolver()">
                        <ng-md-icon icon="arrow_back" size="28"></ng-md-icon>
                        <md-tooltip md-direction="bottom">
                            Volver
                        </md-tooltip>
                    </md-button>
                    <md-button type="button" class="md-primary" ng-click="guardar(false);">
                        <ng-md-icon icon="save" size="20"></ng-md-icon> Guardar
                    </md-button>
                    <md-button type="button" class="md-primary" ng-show="encuesta._id" ng-click="guardar(true);">
                        <ng-md-icon icon="save" size="20"></ng-md-icon> Guardar como nuevo
                    </md-button>
                </div>
            </md-toolbar>
            <!-- /BREADCRUMB -->

            <!-- CONTENT -->
            <section class="md-toolbar-subbody content-body-center fullcenter" id="contentbodycenter" style="margin-left:310px;">
                <div layout="row" layout-padding>
                    <div flex>
                        <div class="block-util block-util-n" style="height:80px; margin-bottom: 1em;">
                            <div class="wrap-autocomplete" style="padding-top:10px">
                                <div class="separador-select">
                                    <span class="label">Encuestadora:</span>
                                    <div class="select-contador horizontal">
                                      <select
                                          chosen
                                          ng-model="encuesta.encuestadora"
                                          no-results-text="'No hay opciones'"
                                          ng-options="item.nombre for item in listaEncuestadoras track by item.nombre"
                                          style="width:300px;">
                                          <option value=""></option>
                                      </select>
                                      <md-checkbox class="md-primary" ng-model="encuesta.flash_electoral" aria-label="Flash electoral" style="margin: 5px 8px;">
                                        <span class="md-body-1" style="line-height:14px;">Flash electoral</span>
                                      </md-checkbox>
                                      <!-- <md-button ng-click="mostrarModalEncuestadoras($event)" class="md-icon-button configuracion" style="height:40px; line-height:40px;">
                                        <ng-md-icon icon="settings" size="24" style="fill:black"></ng-md-icon>
                                        <md-tooltip md-direction="right">Configurar lista</md-tooltip>
                                      </md-button> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="block-util block-util-n" style="height:80px">
                            <div class="wrap-autocomplete" style="padding-top:10px; text-align:center;">
                                <div class="separador-select" style="display: inline-block; text-align: left; width: 240px;">
                                    <span class="label" style="text-align: left;">Fecha:</span>
                                    <input type="date" ng-model="encuesta.fecha" style="width:220px; color: #999; padding:4px 7px; ">
                                </div>
                                <div class="separador-select" style="display: inline-block; text-align: left; width: 200px;">
                                    <span class="label" style="text-align: left;">Mesas escrutadas:</span>
                                    <input name="mesas" type="text" ng-model="encuesta.mesas_escrutadas" style="padding: 6px 0;">
                                </div>
                                <div class="separador-select" style="display: inline-block; text-align: left; width: 200px;">
                                    <span class="label" style="text-align: left;">Votos:</span>
                                    <input name="mesas" type="text" ng-model="encuesta.votos" style="padding: 6px 0;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div layout="row" style="text-align:center;">
                    <div flex id="mensaje-ordenamiento">
                      <!-- <pre style="background-color:yellow; word-break: break-word;">{{encuesta}}</pre> -->
                        Los candidatos se mostrarán en el orden indicado, ingrese los porcentajes de mayor a menor:
                    </div>
                </div>
                <!-- <div layout="row">
                  <div class="ul-draggable-ticker">
                    <ul class="list-tickers">
                      <li id="item-id--list{{$index}}" ng-repeat="candidato in encuesta.candidatos" style="display: inline-block;">
                        <div class="div-drop candidato" ng-drop="true" ng-drop-success="onDropCompleteOrder($index, $data, $event)">
                          <div ng-drag="true"  ng-drag-data="item" class="div-drag">
                              <div class="candidato-foto" ng-click="mostrarModalSeleccionarCandidato($event, $index, candidato)">
                                  <div class="candidato-posicion" ng-show="candidato.foto===''">
                                      <button ng-drag-handle type="button" class="ticker-enum">{{$index + 1}}</button>
                                  </div>
                                  <div class="candidato-posicion-extra" ng-show="candidato.foto!==''">
                                      
                                      <button ng-drag-handle type="button" class="ticker-enum">{{$index + 1}}</button>
                                  </div>
                                  <img ng-src="{{candidato.foto}}" alt="{{candidato.nombre}}" id="img-candidato-{{$index}}">
                                  <div style="right:0px; top:0px; position: absolute;" ng-show="mostrarBotonEliminarCandidato">
                                      <md-button type="button" ng-click="removerCandidato($event, $index)" class="md-fab md-primary md-mini" aria-label="Eliminar">
                                          <md-tooltip>Remover candidato</md-tooltip>
                                          <ng-md-icon icon="delete" size="20" style="fill:white"></ng-md-icon>
                                      </md-button>
                                  </div>
                              </div>
                              <div class="candidato-nombre">
                                  {{candidato.nombrecorto}}
                              </div>
                              <div class="candidato-partido">
                                  {{candidato.partido}}
                              </div>
                              <div class="porcentaje">
                                  <md-input-container class="md-icon-float md-icon-right md-block">
                                      <span>%</span>
                                      <input ng-model="candidato.porcentaje" tabindex="0" valid-number/>
                                  </md-input-container>
                              </div>
                              <div class="segunda">
                                <md-checkbox class="md-primary" ng-model="candidato.segunda" aria-label="Pasa a segunda vuelta" ng-change="cambiarSegundaVuelta($index);">
                                  <span class="md-body-1" style="line-height:14px;">Pasa a segunda vuelta</span>
                                </md-checkbox>
                              </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div> -->
                <div layout="row" layout-align="center center">
                  <div ng-if="encuesta.candidatos.length>0" class="temas-dia-chips">
                    <ul
                                  dnd-list="encuesta.candidatos"
                                  class="list-temas-dia"
                                  dnd-allowed-types="['itemType']"
                                  dnd-horizontal-list="true"
                                  dnd-external-sources="true"
                                  dnd-dragover="dragoverCallback(event, index, external, type)"
                                  dnd-drop="dropCallback(event, index, item, external, type, 'itemType')"
                                  dnd-inserted="logEvent('Element was inserted at position ' + index, event)">
                                  <li class="dndPlaceholder">Inserta aquí</li>
                                  <li ng-repeat="item in encuesta.candidatos"
                                      dnd-draggable="item"
                                      dnd-type="'itemType'"
                                      dnd-dragstart="logEvent('Started to drag an item', event)"
                                      dnd-moved="encuesta.candidatos.splice($index, 1); logEvent('Item moved', event)"
                                      dnd-copied="logEvent('Item copied', event)"
                                      dnd-canceled="logEvent('Drag operation canceled', event)"
                                      dnd-dragend="logEvent('Drag operation ended', event)"
                                      >
                                      <div class="chip-legend chip-custom candidato">
                                        <!-- <div class="candidato-foto" ng-click="mostrarModalSeleccionarCandidato($event, $index, candidato)" ng-mouseover="mostrarBotonEliminarCandidato=true;" ng-mouseleave="mostrarBotonEliminarCandidato=false;"> -->
                                        <div class="candidato-foto" ng-click="mostrarModalSeleccionarCandidato($event, $index, item)">
                                            <div class="candidato-posicion" ng-show="item.foto===''">
                                                {{$index + 1}}
                                            </div>
                                            <div class="candidato-posicion-extra" ng-show="item.foto!==''">
                                                {{$index + 1}}
                                            </div>
                                            <img ng-src="{{item.foto}}" alt="{{item.nombre}}" id="img-candidato-{{$index}}">
                                            <div style="right:0px; top:0px; position: absolute;" ng-show="mostrarBotonEliminarCandidato">
                                                <md-button type="button" ng-click="removerCandidato($event, $index)" class="md-fab md-primary md-mini" aria-label="Eliminar">
                                                    <md-tooltip>Remover candidato</md-tooltip>
                                                    <ng-md-icon icon="delete" size="20" style="fill:white"></ng-md-icon>
                                                </md-button>
                                            </div>
                                        </div>
                                        <div class="candidato-nombre">
                                            {{item.nombrecorto}}
                                        </div>
                                        <div class="candidato-partido">
                                            {{item.partido}}
                                        </div>
                                        <div class="porcentaje">
                                            <md-input-container class="md-icon-float md-icon-right md-block">
                                                <span>%</span>
                                                <input ng-model="item.porcentaje" tabindex="0" valid-number/>
                                            </md-input-container>
                                        </div>
                                        <div class="segunda">
                                          <!-- <md-checkbox class="md-primary" ng-model="item.segunda" aria-label="Pasa a segunda vuelta" ng-change="cambiarSegundaVuelta($index);"> -->
                                          <md-checkbox class="md-primary" ng-model="item.segunda" aria-label="Pasa a segunda vuelta">
                                            <span class="md-body-1" style="line-height:14px;">Pasa a segunda vuelta</span>
                                          </md-checkbox>
                                        </div>
                                    </div>
                                  </li>
                    </ul>
                  </div>
                </div>
            </section>
        </div>
    </div>
</div>
