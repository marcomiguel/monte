app.controller("facebookCtrl",["$scope","$rootScope","$location","$preload","$http","$mdDialog","$msj","$timeout","$logout","$login","$localStorage","$routeParams","$sce","$mdToast","$window","$popup",function($scope,$rootScope,$location,$preload,$http,$mdDialog,$msj,$timeout,$logout,$login,$localStorage,$routeParams,$sce,$mdToast,$window,$popup){var ng=$scope,URL={base:CMSDATA.GLOBAL.URLBASE,sesion:"session"};ng.user={pictureUrl:!1};{var rechazarSesion=function(){$msj.show(CMSDATA.MSJ.MSJ0,CMSDATA.POSITIONMSJ),delete $localStorage.login,$preload.hide(),$location.path("/")},verificarDetalle=function(){ng.fb={accounts:[{url:"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xfa1/v/t1.0-1/p50x50/11208644_10153257677187192_6523051772523816256_n.jpg?oh=ef49f2158924d824a3edc25e9794c1b4&oe=56FE0CFB&__gda__=1460354674_9c24454b7ddcce01cb30f567e93d3430",name:"Joan Peramas",active:!0,groups:{pages:[{url:"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xlf1/v/t1.0-1/c26.26.322.322/s50x50/307323_227786970604776_4703518_n.jpg?oh=096b7c6a996941a4955230a65c97cf42&oe=56FECCAD&__gda__=1460233711_7e33532204f099aa19e88c333648011f",name:"pagina1.pe",active:!1},{url:"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xpa1/v/t1.0-1/p24x24/1377434_660253787325842_1947381907_n.png?oh=7bde8f8386946a0eb4d2388ad557747c&oe=57184763&__gda__=1464285133_2e37472980d852638e6b6feb9d259a1d",name:"pagina2.pe",active:!0}],groups:[{url:"https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/9JuawalS9Z6.png",name:"grupo1",active:!1}]}},{url:"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xaf1/v/t1.0-1/p50x50/10301518_10152110417491691_2878536045802268329_n.jpg?oh=a1e04dcf7a3b7191ebd8620a9d738615&oe=57038831&__gda__=1460738189_8563653bfb732cad84c7a8eca971d793",name:"Erica Licas",active:!1,groups:{pages:[{url:"https://fbcdn-profile-a.akamaihd.net/hprofile-ak-xlf1/v/t1.0-1/c26.26.322.322/s50x50/307323_227786970604776_4703518_n.jpg?oh=096b7c6a996941a4955230a65c97cf42&oe=56FECCAD&__gda__=1460233711_7e33532204f099aa19e88c333648011f",name:"pagina1.pe",active:!1}],groups:[{url:"https://static.xx.fbcdn.net/rsrc.php/v2/y3/r/0PnClccPFXs.png",name:"grupo1",active:!1}]}}]},ng.insertFBActive=function($event,page,$index,type,parentIndex){var $index=$index,type=type,parentIndex=parentIndex;ng.fb.accounts[parentIndex].groups[type][$index].active=ng.fb.accounts[parentIndex].groups[type][$index].active===!1?!0:!1},ng.activeAccountFB=function($event,account,$index){for(var $index=$index,i=0;i<ng.fb.accounts.length;i++)ng.fb.accounts[i].active=!1;ng.fb.accounts[$index].active=!0},ng.isAccountsFB=!1;ng.loginFB=function($event){$popup.open("http://facebook.com","rpp")},ng.clickSave=function($event){$preload.show(),$timeout(function(){$preload.hide(),$msj.show("Se guardo correctamente.",positionMSj)},3e3)}},verificarSesion=function(){$preload.show(),$login.get(URL.base+URL.sesion).then(function(data){var data=data;data.status?(ng.user.pictureUrl=""==data.response.foto?!1:data.response.foto+"?"+(new Date).getTime(),verificarDetalle(),$preload.hide()):rechazarSesion()},function(msgError){rechazarSesion()})};!function(){verificarSesion()}()}}]);