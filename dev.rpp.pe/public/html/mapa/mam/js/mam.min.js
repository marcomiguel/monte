"use strict";var rppMaM=window.rppMaM||{};rppMaM.insertStylesheet=function(c,a){var b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;c.appendChild(b)};rppMaM.insertJavascript=function(b,a,e,c){var d=document.createElement("script");d.async=true;d.src=a;d.async=true;d.charset="utf-8";d.onload=function(){e()};b.appendChild(d)};rppMaM.$={fade:function(a){a.style.opacity=0;a.style.height="0px";a.style.overflow="hidden"},unfade:function(a){a.style.opacity=1;a.style.height="auto";a.style.overflow="visible"},isEmpty:function(a){return(a===false||a===undefined||a===null||((String(a)).trim()).length<=0)?true:false},getTime:function(){return String(new Date().getTime())},global:{},globalTitle:"",st:45,idMaM:{id:0,scrollTop:0,flag:false},getParameterByName:function(a,e,c){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");if(c==="post"){var d=new RegExp(a+'="([^]*) data-width'),b=d.exec(e);return b==null?"":b[1].replace('"',"")}else{if(c==="video"){var d=new RegExp(a+'="([^]*) class'),b=d.exec(e);return b==null?"":b[1].replace('"><div',"")}else{return""}}},reviewSocial:function(){setTimeout(function(){if(typeof(twttr)!="undefined"){twttr.widgets.load()}if(typeof(FB)!="undefined"){FB.XFBML.parse(document.getElementById("mamXYZ"))}},10)},debounce:function(b,d,a){var c;return function(){var h=this,g=arguments;var f=function(){c=null;if(!a){b.apply(h,g)}};var e=a&&!c;clearTimeout(c);c=setTimeout(f,d);if(e){b.apply(h,g)}}},scrollToTop:function(d,c){var b=-window.scrollY/(d/15);var a=setInterval(function(){if(window.scrollY>c){window.scrollBy(0,b)}else{clearInterval(a)}},15)},getElementOffset:function(a){var e=document.documentElement;var b=a.getBoundingClientRect();var d=b.top+window.pageYOffset-e.clientTop;var c=b.left+window.pageXOffset-e.clientLeft;return{top:d,left:c}},openSocial:function(j,p){var b=document.location.origin+document.location.pathname;var c=encodeURIComponent(b),n=600,g=450,a,r,a=(screen.width/2)-(n/2),r=(screen.height/2)-(g/2);var i=p.parentNode.parentNode;var k=i.querySelector(".rpp-mam-xyz--text p");var o=(k!=null)?encodeURIComponent(k.innerHTML):"";var f=i.querySelector(".rpp-mam-xyz--media-image");var e=rppMaM.$.global.social.twitter.via;var m="";if(f){m="&picture=";m+=(f)?f.src:""}else{if(rppMaM.$.global.hasOwnProperty("imageShare")){m="&picture=";m+=rppMaM.$.global.imageShare}}var l=((document.location.origin).replace("dev.","")).replace("pre.","");var d=document.location.pathname;var q="https://www.facebook.com/dialog/feed?app_id="+rppMaM.$.global.social.facebook.app_id+"&display=popup&caption="+l+encodeURIComponent(" | por ")+rppMaM.$.global.social.facebook.via+m+"&link="+l+d+"&name="+encodeURIComponent(rppMaM.$.globalTitle)+"&description="+o+"&redirect_uri="+rppMaM.$.global.fbClose+"&cancel_url=&ref=click_share_sb";switch(j){case"facebook":window.open(q,"rppwindow","toolbar=0, status=0, left="+a+", top="+r+", width="+n+", height="+g);break;case"twitter":window.open("https://twitter.com/intent/tweet?text="+o+"&url="+c+"&via="+e,"rppwindow","toolbar=0, status=0, left="+a+", top="+r+", width="+n+", height="+g);break}}};rppMaM.getTransport=function(b,e,a){var d=new XMLHttpRequest();var c=b+"?v="+rppMaM.$.getTime();d.open("GET",c,true);d.onreadystatechange=function(){if(this.readyState===4){if(this.status>=200&&this.status<400){var f=JSON.parse(this.responseText);e(f)}else{a(this.statusText)}}};d.send();d=null};rppMaM._contruct=function(type,obj,DOM,url5){var compareGoalName=0,compareGoalName2=0;var _contructHeader=function(DOM,match,title,type){(title)?(DOM.title.innerHTML=title):"";var status=String(match.estado);if(status){switch(status){case"0":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-poriniciar">Por iniciar</div>';break;case"1":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Primer Tiempo</div>';break;case"2":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-finalizado">Finalizado</div>';break;case"3":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-finalizado">Suspendido</div>';break;case"4":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-finalizado">Postergado</div>';break;case"5":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Entretiempo</div>';break;case"6":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Segundo Tiempo</div>';break;case"7":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Fin de Tiempo Reglamentario</div>';break;case"8":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Alargue 1</div>';break;case"9":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Fin alargue 1</div>';break;case"10":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Alargue 2</div>';break;case"11":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Fin alargue 2</div>';break;case"11":DOM.status.innerHTML='<div class="rpp-mam-xyz--state-envivo">Definici√≥n por penales</div>';break;default:DOM.status.innerHTML='<div class="rpp-mam-xyz--state-poriniciar">Por iniciar</div>';break}}(match.local.nombre_equipo)?(DOM.teamName1.innerHTML=match.local.nombre_equipo):"";(match.visitante.nombre_equipo)?(DOM.teamName2.innerHTML=match.visitante.nombre_equipo):"";if(status==="0"){DOM.scoreMatch.innerHTML="VS"}else{DOM.scoreMatch.innerHTML=match.local.goles+"-"+match.visitante.goles}var _urlShield=rppMaM.$.global.urlShield;var _shild1=_urlShield+match.local.id+".png";if(DOM.shield1.src!=_shild1){DOM.shield1.setAttribute("src",_shild1)}var _shild2=_urlShield+match.visitante.id+".png";if(DOM.shield2.src!=_shild2){DOM.shield2.setAttribute("src",_shild2)}var arrGoalName=(match.local.gol_jugadores)?match.local.gol_jugadores:[];if(arrGoalName.length>0){if(compareGoalName!=arrGoalName.length){var _cntGoalName=DOM.goalsName1;_cntGoalName.innerHTML="";for(var j=0;j<arrGoalName.length;j++){var posLi=arrGoalName[j];var _liGoalName=document.createElement("li");_liGoalName.className="rpp-mam-xyz--goalname-insert";var convertTime2=(posLi.tiempo==="ST")?(parseInt(posLi.minuto)+rppMaM.$.st):posLi.minuto;_liGoalName.innerHTML="<strong>"+convertTime2+"'</strong> "+posLi.jugador;var _liInsertGoalName=_cntGoalName.insertBefore(_liGoalName,_cntGoalName.firstChild);rppMaM.$.unfade(_liInsertGoalName)}compareGoalName=arrGoalName.length}}else{DOM.goalsName1.innerHTML=""}var arrGoalName2=(match.visitante.gol_jugadores)?match.visitante.gol_jugadores:[];if(arrGoalName2.length>0){if(compareGoalName2!=arrGoalName2.length){var _cntGoalName2=DOM.goalsName2;_cntGoalName2.innerHTML="";for(var k=0;k<arrGoalName2.length;k++){var posLi2=arrGoalName2[k];var _liGoalName2=document.createElement("li");_liGoalName2.className="rpp-mam-xyz--goalname-insert";var convertTime=(posLi2.tiempo==="ST")?(parseInt(posLi2.minuto)+rppMaM.$.st):posLi2.minuto;_liGoalName2.innerHTML="<strong>"+convertTime+"'</strong> "+posLi2.jugador;var _liInsertGoalName2=_cntGoalName2.insertBefore(_liGoalName2,_cntGoalName2.firstChild);rppMaM.$.unfade(_liInsertGoalName2)}compareGoalName2=arrGoalName2.length}}else{DOM.goalsName2.innerHTML=""}};var initList=0;var ss=0;var _contructLi=function(incident,DOM,match,type){var pos=incident;if(initList===0){DOM.flowContent.innerHTML='<li class="rpp-mam-xyz--inside"></li>';initList++}var _li=document.createElement("li");_li.className="rpp-mam-xyz--inside rpp-mam-xyz--inside-insert";var _html='<div class="rpp-mam-xyz--text">';if(!rppMaM.$.isEmpty(pos.texto)){_html+="<p>"+pos.texto+"</p>"}_html+="</div>";if(!rppMaM.$.isEmpty(pos.foto)){_html+='<figure class="rpp-mam-xyz--media"><img class="rpp-mam-xyz--media-image" src="'+pos.foto+'" alt="Imagen de minuto a minuto" /></figure>'}if(!rppMaM.$.isEmpty(pos.embed)){if((pos.embed).indexOf("fb-post")!=-1){var postFB=String(pos.embed);var _postFB=rppMaM.$.getParameterByName("data-href",postFB,"post");var __postFB='<div class="fb-post" data-href="'+_postFB+'" data-width="500"></div>';_html+='<div class="rpp-mam-xyz--media">'+__postFB+"</div>"}else{if((pos.embed).indexOf("fb-video")!=-1){var postFB=String(pos.embed);var _postFB=rppMaM.$.getParameterByName("data-href",postFB,"video");var __postFB='<div class="fb-video" data-allowfullscreen="1" data-href="'+_postFB+'"></div>';_html+='<div class="rpp-mam-xyz--media">'+__postFB+"</div>"}else{_html+='<div class="rpp-mam-xyz--media">'+pos.embed+"</div>"}}}if(pos.hasOwnProperty("noticias_relacionadas")){if(pos.noticias_relacionadas.length>0){_html+='<div class="rpp-mam-xyz--media"><ul class="rpp-mam-xyz--related">';if(pos.noticias_relacionadas.length===1){var __pos=pos.noticias_relacionadas[0];_html+='<li><div class="rpp-mam-xyz--block-related"><div class="rpp-mam-xyz--block-left"><a target="_blank" href="'+__pos.url+'"><img src="'+__pos.foto+'" alt="'+__pos.titulo+'" /></a></div><div class="rpp-mam-xyz--block-right"><a target="_blank" href="'+__pos.url+'">'+__pos.titulo+'</a> <br/><span class="rpp-mam-xyz--block-sitio">'+__pos.sitio.nombre+"</span></div></div></li>"}else{_html+='<li class="rpp-mam-xyz--block-titulorel">Noticias relacioandas</li>';for(var k=0;k<pos.noticias_relacionadas.length;k++){var __pos=pos.noticias_relacionadas[k];_html+='<li><a target="_blank" href="'+__pos.url+'">&#8226; '+__pos.titulo+"</a></li>"}}_html+="</ul></div>"}}_html+='<div class="rpp-mam-xyz--social"><span class="rpp-mam-xyz--social-text">Compartir</span><i onclick="rppMaM.$.openSocial(\'facebook\', this)" class="rpp-mam-xyz-icon rpp-mam-xyz-icon-facebook"></i><i onclick="rppMaM.$.openSocial(\'twitter\', this)" class="rpp-mam-xyz-icon rpp-mam-xyz-icon-twitter"></i></div><div class="rpp-mam-xyz--time">';if(pos.hasOwnProperty("grupo")&&(pos.grupo===0||pos.grupo===1.5||pos.grupo===4)){if(!rppMaM.$.isEmpty(pos.fecha_publicacion)){var _date=new Date(pos.fecha_publicacion);var _hour=_date.getHours();var _minut=_date.getMinutes();if(String(_minut).split("").length===1){_minut="0"+_minut}_html+='<time class="rpp-mam-xyz--time-nopadding">'+_hour+":"+_minut+"</time>"}}else{var _convertHora=(Number(pos.hora)>=0)?((pos.tiempo===2)?(Number(pos.hora)+rppMaM.$.st):Number(pos.hora)):"";if(!rppMaM.$.isEmpty(pos.mas_tiempo)){_html+='<time class="rpp-mam-xyz--time-padding rpp-mam-xyz--time-peligro">'+_convertHora+"</time>"}else{if(pos.icono==="gol"){_html+='<time class="rpp-mam-xyz--time-padding rpp-mam-xyz--time-exito">'+_convertHora+"</time>"}else{_html+='<time class="rpp-mam-xyz--time-padding">'+_convertHora+"</time>"}}if(!rppMaM.$.isEmpty(pos.icono)){_html+='<div class="rpp-mam-xyz--icon"><i class="rpp-mam-xyz-icon rpp-mam-xyz-icon-'+pos.icono+'"></i></div>'}}_html+="</div>";_li.innerHTML=_html;_li.id=ss;ss++;var _liInsert;var _cnt;if(type==="recursive"){_cnt=DOM.flowContentRecrusive;_liInsert=_cnt.insertBefore(_li,_cnt.firstChild.nextSibling)}else{_cnt=DOM.flowContent;_liInsert=_cnt.insertBefore(_li,_cnt.lastChild.nextSibling)}rppMaM.$.unfade(eval(_liInsert))};var _recursive;var idsRecursive=[];rppMaM.$.unfade(DOM.loaderFlow);rppMaM.getTransport(obj.urlApi,function(data){if(data){if(data.terminado){rppMaM.$.fade(DOM.loaderFlow);return false}var incidents=data.incidencias?data.incidencias:{};var match=data.match?data.match:{};var url5=data.url5;var title=data.titulo;var __tipo=data.tipo;if(__tipo.id===2){DOM.cntTeam.style.display="none";DOM.cntGoals.style.display="none"}rppMaM.$.globalTitle=title;_contructHeader(DOM,match,title,"init");var key,count=0;for(key in incidents){if(incidents.hasOwnProperty(key)){count++;idsRecursive.push(key);_contructLi(incidents[key],DOM,match,"init")}}rppMaM.$.reviewSocial();setTimeout(function(){rppMaM.$.fade(DOM.loaderFlow)},(1/2)*1000);_recursive=setInterval(function(){rppMaM.getTransport(url5,function(data){if(data){if(data.terminado){clearInterval(_recursive)}var incidents=data.incidencias?data.incidencias:{};var match=data.match?data.match:{};var key,count=0;_contructHeader(DOM,match,undefined,"recursive");var isAccept=true;for(key in incidents){if(incidents.hasOwnProperty(key)){count++;isAccept=true;for(var l=0;l<idsRecursive.length;l++){if(idsRecursive[l]===key){isAccept=false;break}else{isAccept=true;continue}}if(isAccept){idsRecursive.push(key);_contructLi(incidents[key],DOM,match,"recursive");rppMaM.$.idMaM.flag=true}}}rppMaM.$.reviewSocial();if(isAccept){rppMaM.$.unfade(DOM.loaderFlow);setTimeout(function(){rppMaM.$.fade(DOM.loaderFlow)},(1/2)*1000)}}},function(err){console.log(err,"err")})},obj.timeSeconds*1000)}},function(err){console.log(err,"err");rppMaM.$.fade(DOM.loaderFlow);rppMaM._contruct("init",obj,DOM)})};rppMaM.recursive=function(e,h){var e=e;var g=document.head;if(!e.status){return false}if(e.pathCSS){rppMaM.insertStylesheet(g,e.pathCSS)}if(typeof(twttr)==="undefined"){rppMaM.insertJavascript(g,"//platform.twitter.com/widgets.js",function(){},"twitter")}var c=document.querySelector(e.classCss);var i={title:c.querySelector(".rpp-mam-xyz--title"),status:c.querySelector(".rpp-mam-xyz--state"),shield1:c.querySelector(".rpp-mam-xyz--team-shield1"),shield2:c.querySelector(".rpp-mam-xyz--team-shield2"),cntTeam:c.querySelector(".rpp-mam-xyz--team"),teamName1:c.querySelector(".rpp-mam-xyz--over-team-match-1"),teamName2:c.querySelector(".rpp-mam-xyz--over-team-match-2"),scoreMatch:c.querySelector(".rpp-mam-xyz--cell-point"),cntGoals:c.querySelector(".rpp-mam-xyz--goals"),goalsName1:c.querySelector(".rpp-mam-xyz--goals-1"),goalsName2:c.querySelector(".rpp-mam-xyz--goals-2"),loaderFlow:c.querySelector(".rpp-mam-xyz--loading"),flowContent:c.querySelector(".rpp-mam-xyz--flow-inside"),flowContentRecrusive:c.querySelector(".rpp-mam-xyz--flow-inside-recursive"),flowItem:c.querySelectorAll(".rpp-mam-xyz--inside")};c.id="mamXYZ";rppMaM.$.idMaM.id=c.id;rppMaM.$.global=e;rppMaM._contruct("init",e,i);var b=document.createElement("div");b.className="rpp-mam-xyz--anchor";b.id="mamBtn"+rppMaM.$.getTime();b.innerHTML='<i class="rpp-mam-xyz-icon rpp-mam-xyz-icon-up"></i> Nuevas incidencias';c.appendChild(b);var d=220;b.onclick=function(){var j=rppMaM.$.getElementOffset(document.querySelector(e.classCss)).top;console.log(j,"_dS0");rppMaM.$.scrollToTop(500,j+d);rppMaM.$.fade(b);rppMaM.$.idMaM.flag=false};var f=function(){var j=rppMaM.$.getElementOffset(document.querySelector(e.classCss)).top;if(document.body.scrollTop>j+d+150){if(rppMaM.$.idMaM.flag){rppMaM.$.unfade(b)}else{rppMaM.$.fade(b);rppMaM.$.idMaM.flag=false}}else{rppMaM.$.fade(b);rppMaM.$.idMaM.flag=false}};setInterval(function(){f()},250);var a=rppMaM.$.debounce(function(){var j=rppMaM.$.getElementOffset(document.querySelector(e.classCss)).top;console.log(document.body.scrollTop,"document.body.scrollTop");console.log(j+d+50,"_dS + offMaM + 50");if(document.body.scrollTop<=j+d+50){rppMaM.$.fade(b);rppMaM.$.idMaM.flag=false}},10);window.removeEventListener("scroll",a)};